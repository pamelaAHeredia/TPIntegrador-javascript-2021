<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<!--faltaba agregar el charset -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>PokémonApi-Grupo7</title>
	<style>
		html {
			text-align: center;
		}

		.estiloDiv {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
			text-align: center;
		}
	</style>
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
</head>

<body>
	<nav class="links"></nav>
	<div id="miDiv" class="estiloDiv">
	</div>
	<script>
		const links = document.querySelector(".links");
		var prevlink;
		var nextLink;
		const pokemonesPorPagina = 26;
		const apiUrl = "https://pokeapi.co/api/v2/pokemon/?limit=" + pokemonesPorPagina + "&offset=0"
		const pokemonesUrl = "https://pokeapi.co/api/v2/pokemon/"

		function mostrarPokemones(url) {
			fetch(url)
				.then(response => response.json())
				.then(pok => {
					for (let i = 0; i < pok.results.length; i++) {
						let text = document.createElement("h2");
						let node = document.createTextNode(pok.results[i].name);
						text.appendChild(node);
						text.id = pok.results[i].name;
						let insertarADiv = document.getElementById("miDiv");
						insertarADiv.appendChild(text);
					}
					prevLink = pok.previous ? `<a href="${pok.previous}">⏮️</a>` : "";
					nextLink = pok.next ? `<a href="${pok.next}">⏭️</a>` : "";
					links.innerHTML = prevLink + " " + nextLink;
				});
		}


		mostrarPokemones(apiUrl);
		document.addEventListener("click", e => {
			if (e.target.matches(".links a")) {
				let div = document.getElementById("miDiv");
				div.innerHTML = '';
				e.preventDefault();
				mostrarPokemones(e.target.getAttribute("href"));
			}
		})


		const fetchData = async (id) => {//HACE EL PEDIDO DE INFORMACIÓN A LA POKEAPI
			try {
				console.log("id pokemon a buscar:" + id)
				const res = await fetch(`https://pokeapi.co/api/v2/pokemon/${id}`)
				const data = await res.json()
				console.log(data)
				const pokemon = {
					imgCvg: data.sprites.other.dream_world.front_default,
					nombre: data.name,
					experiencia: data.base_experience,
					hp: data.stats[0].base_stat,
					ataque: data.stats[1].base_stat,
					defensa: data.stats[2].base_stat,
					especial: data.stats[3].base_stat,
					habilidad: data.abilities[1].ability.name,
				}
				pintarCarta(pokemon);
			} catch (error) {//si hay error
				console.log(error)//lo imprimo en consola
			}
		}


	</script>
</body>

</html>